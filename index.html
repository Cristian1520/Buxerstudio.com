<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buxer Studio</title>
    <style>
        /* Base styles for light mode */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font as per instructions */
            display: flex; /* Use flexbox for easy centering */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            min-height: 100vh; /* Make sure body takes full viewport height */
            margin: 0;
            background-color: #f0f0f0; /* Light background for contrast */
            color: #333; /* Dark text */
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for theme change */
            position: relative; /* Needed for positioning the theme toggle button and snow */
            border-radius: 8px; /* Apply rounded corners to body for consistency */
            overflow: hidden; /* Hide overflow for snow effect */
            perspective: 800px; /* Further decreased perspective for a more dramatic 3D effect */
        }

        /* Style for the outside panel background fade */
        #panel-fade-background {
            position: absolute;
            /* width and height will be set by JavaScript for responsiveness */
            background: linear-gradient(to bottom right, rgba(0, 123, 255, 0.3), rgba(0, 123, 255, 0.1)); /* Blue fade */
            border-radius: 15px; /* Slightly larger border-radius than panel */
            filter: blur(40px); /* Increased blur for a softer, more expansive glow */
            z-index: 0; /* Place behind the middle panel */
            transform: rotateY(0deg) rotateX(0deg) scale(1.15); /* Initial state, larger scale */
            opacity: 1; /* Always visible */
            transition: background 0.3s ease, transform 0.06s ease-out; /* Smooth transition for theme and mouse-follow (opacity transition removed) */
            transform-style: preserve-3d; /* Preserve 3D transformations */
        }

        .middle-panel {
            background-color: white;
            padding: 40px;
            border-radius: 8px; /* Rounded corners for the panel */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px; /* Limit panel width */
            width: 90%; /* Responsive width */
            transform: rotateY(0deg) rotateX(0deg) scale(1); /* Initial state for panel */
            transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease-out, box-shadow 0.3s ease;
            border: 2px solid #ccc; /* Added border to the panel */
            z-index: 1; /* Ensure panel is above snow and fade background */
            position: relative; /* For z-index to work and for ::before positioning */
            transform-style: preserve-3d; /* Preserve 3D transformations for children */
            overflow: hidden; /* Hide overflow for pseudo-element */
        }

        /* Blue fade effect on the inside of the panel using ::before */
        .middle-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom right, rgba(0, 123, 255, 0.15), rgba(0, 123, 255, 0.05)); /* Blue fade on the inside */
            border-radius: 8px; /* Match panel border-radius */
            z-index: -1; /* Place behind panel content */
            opacity: 0; /* Hidden by default */
            transition: background 0.3s ease, opacity 0.3s ease; /* Smooth transition for fade effect */
        }

        /* Hover state for the middle panel (JS adds/removes .panel-hovered class) */
        .middle-panel.panel-hovered {
            transform: scale(1.15); /* Make it bigger, no rotation from hover */
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6); /* Even more pronounced shadow on hover */
        }

        /* Show inside fade when panel is hovered */
        .middle-panel.panel-hovered::before {
            opacity: 1;
        }

        /* This rule is no longer needed for opacity, but kept for consistency if other styles were to be added */
        #panel-fade-background.panel-fade-background-hovered {
            opacity: 1; /* This will have no effect now as opacity is always 1 */
        }


        .blue-button {
            background-color: #007bff; /* A nice shade of blue */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px; /* Rounded corners for the button */
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease, padding 0.2s ease; /* Smooth hover effect, include padding */
            text-decoration: none; /* If it's a link */
            display: inline-block; /* Allows padding and margin to work correctly */
            margin-top: 20px; /* Space above the button */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Subtle shadow for the button */
            position: relative; /* Needed for the shine pseudo-element */
            overflow: hidden; /* Hide overflow for the shine effect */
            z-index: 1; /* Ensure button content is above shine */
        }

        .blue-button:hover {
            background-color: #0056b3; /* Darker blue on hover */
            transform: translateY(-3px) scale(1.05); /* Lift more and slightly scale for visual feedback */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4); /* Enhanced shadow on hover */
            padding: 18px 35px; /* Increased padding for a bigger hitbox */
        }

        /* Shine effect for the blue button */
        .blue-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -50%; /* Start completely off-left, so its right edge is at the button's left edge */
            width: 50%; /* Width of the shine */
            height: 100%;
            background: rgba(255, 255, 255, 0.3); /* White, semi-transparent shine */
            transform: skewX(-20deg); /* Angle the shine */
            transition: transform 0.4s ease-out; /* Smooth transition for the shine movement */
            z-index: 2; /* Ensure shine is above button content */
        }

        .blue-button:hover::after {
            transform: skewX(-20deg) translateX(300%); /* Move shine across to the right, fully exiting */
        }


        /* Dark Mode Specific Styles */
        body.dark-mode {
            background-color: #1a1a1a; /* Dark background */
            color: #f0f0f0; /* Light text */
        }

        /* Dark mode for the outside panel fade */
        body.dark-mode #panel-fade-background {
            background: linear-gradient(to bottom right, rgba(0, 123, 255, 0.25), rgba(0, 123, 255, 0.08)); /* Adjusted for dark mode, more visible */
        }

        /* Dark mode for the panel's internal fade */
        .middle-panel.dark-mode::before {
            background: linear-gradient(to bottom right, rgba(0, 123, 255, 0.1), rgba(0, 123, 255, 0.03)); /* Adjusted for dark mode, more subtle */
        }

        .middle-panel.dark-mode {
            background-color: #333; /* Darker panel background */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* More pronounced shadow */
            border-color: #555; /* Darker border for dark mode */
        }

        /* Theme Toggle Button Styles */
        #theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #6c757d; /* Grey button */
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px; /* Rounded corners for the toggle button */
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease; /* Smooth hover effect */
            z-index: 100; /* Ensure it's on top of other content if any */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Subtle shadow for the toggle button */
        }

        #theme-toggle:hover {
            background-color: #5a6268; /* Darker grey on hover */
            transform: translateY(-2px); /* Lift button slightly on hover */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Enhanced shadow on hover */
        }

        /* Snow Effect Styles */
        #snow-container {
            position: fixed; /* Fixed position to cover the entire viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows clicks to pass through to elements below */
            z-index: 0; /* Ensure snow is behind content */
            display: none; /* Hidden by default */
        }

        /* Show snow container only in dark mode */
        body.dark-mode #snow-container {
            display: block;
        }

        .snowflake {
            position: absolute;
            background-color: #fff; /* White snowflakes */
            border-radius: 50%; /* Make them round */
            opacity: 0.8;
            animation: fall linear infinite; /* Apply fall animation */
        }

        @keyframes fall {
            0% {
                transform: translateY(0) translateX(0); /* Start from its initial 'top' position */
                opacity: 0;
            }
            5% {
                opacity: 0.8; /* Become visible shortly after starting to fall */
            }
            100% {
                transform: translateY(calc(100vh + 250px)) translateX(var(--x-end)); /* Fall beyond the bottom of the viewport */
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <!-- Theme Toggle Button -->
    <button id="theme-toggle">Dark Mode</button>

    <!-- Snow Container -->
    <div id="snow-container"></div>

    <!-- New element for the blue fade background (outside effect) -->
    <div id="panel-fade-background"></div>

    <div class="middle-panel">
        <h2>Welcome To Buxer Studio!</h2>
        <p>Buxer Studio is a small studio</p>
        <!-- Changed button to an anchor tag for redirection -->
        <a href="https://buxerstudio.com/games" class="blue-button">Our Games!</a>
    </div>

    <script>
        // Get references to the button and the body element
        const themeToggleButton = document.getElementById('theme-toggle');
        const body = document.body;
        const middlePanel = document.querySelector('.middle-panel'); // Get the middle panel
        const snowContainer = document.getElementById('snow-container'); // Get the snow container
        const panelFadeBackground = document.getElementById('panel-fade-background'); // Get the new fade background element

        // Flag to track if the panel is currently hovered
        let isPanelHovered = false;

        // Function to set the theme based on a class
        function setTheme(isDarkMode) {
            if (isDarkMode) {
                body.classList.add('dark-mode');
                middlePanel.classList.add('dark-mode');
                themeToggleButton.textContent = 'Light Mode';
                // Snow container visibility is handled by CSS based on body.dark-mode
            } else {
                body.classList.remove('dark-mode');
                middlePanel.classList.remove('dark-mode');
                themeToggleButton.textContent = 'Dark Mode';
                // Snow container visibility is handled by CSS based on body.dark-mode
            }
            // Save the user's preference to local storage
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        }

        // Function to create and animate snowflakes
        function createSnowflakes() {
            const numberOfSnowflakes = 100; // Adjust as needed
            for (let i = 0; i < numberOfSnowflakes; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');

                // Random size for variety
                const size = Math.random() * 5 + 2; // 2px to 7px
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;

                // Random starting position (x-axis)
                snowflake.style.left = `${Math.random() * 100}vw`;
                // Set initial top position off-screen to ensure they start falling from above
                snowflake.style.top = `${Math.random() * -200 - 50}px`; // Start between -50px and -250px above the viewport

                // Random animation duration and delay for staggered effect
                const duration = Math.random() * 10 + 5; // 5s to 15s
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${Math.random() * 10}s`;

                // Random horizontal drift for the snowflake
                const xEnd = (Math.random() - 0.5) * 200; // -100px to 100px drift
                snowflake.style.setProperty('--x-end', `${xEnd}px`);

                snowContainer.appendChild(snowflake);
            }
        }

        // --- JavaScript for Panel Mouse-Follow Effect ---
        document.addEventListener('mousemove', (event) => {
            // Get mouse coordinates
            const mouseX = event.clientX;
            const mouseY = event.clientY;

            // Get center of the viewport
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;

            // Calculate normalized offsets (-1 to 1)
            const offsetX = (mouseX - centerX) / centerX;
            const offsetY = (mouseY - centerY) / centerY;

            // Define maximum rotation in degrees for mouse-follow
            const maxRotation = 12;

            // Calculate rotation values
            const rotateYValue = offsetX * maxRotation;
            const rotateXValue = -offsetY * maxRotation;

            // Apply transform to middlePanel and panelFadeBackground only if not hovered
            if (!isPanelHovered) {
                middlePanel.style.transform = `rotateY(${rotateYValue}deg) rotateX(${rotateXValue}deg) scale(1)`;
                panelFadeBackground.style.transform = `rotateY(${rotateYValue}deg) rotateX(${rotateXValue}deg) scale(1.15)`;
            } else {
                // When hovered, ensure they are reset to their non-rotated state
                middlePanel.style.transform = `scale(1.15)`; // Only scale, no rotation
                panelFadeBackground.style.transform = `scale(1.15)`; // Only scale, no rotation
            }

            // Position the fade background relative to the panel's center
            const panelRect = middlePanel.getBoundingClientRect();
            // Dynamically set width and height based on panelRect for responsiveness
            const fadeExtra = 80; // Extra space for the blur effect
            panelFadeBackground.style.width = `${panelRect.width + fadeExtra}px`;
            panelFadeBackground.style.height = `${panelRect.height + fadeExtra}px`;
            panelFadeBackground.style.left = `${panelRect.left - fadeExtra / 2}px`;
            panelFadeBackground.style.top = `${panelRect.top - fadeExtra / 2}px`;
        });

        // Event listeners for panel hover
        middlePanel.addEventListener('mouseenter', () => {
            isPanelHovered = true;
            // Add classes to trigger CSS hover effects (scale, box-shadow, opacity for fades)
            middlePanel.classList.add('panel-hovered');
            // panelFadeBackground.classList.add('panel-fade-background-hovered'); // Removed this line
        });

        middlePanel.addEventListener('mouseleave', () => {
            isPanelHovered = false;
            // Remove classes to revert to mouse-follow/default states
            middlePanel.classList.remove('panel-hovered');
            // panelFadeBackground.classList.remove('panel-fade-background-hovered'); // Removed this line
            // When mouse leaves, mousemove will immediately pick up and apply the rotation based on current mouse position
        });


        // Check for saved theme preference on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Create snowflakes once on page load
            createSnowflakes();

            const savedTheme = localStorage.getItem('theme');
            // Default to dark mode if no theme is saved or if it's not explicitly 'light'
            if (savedTheme === 'light') {
                setTheme(false); // Apply light mode if 'light' is explicitly saved
            } else {
                setTheme(true); // Default to dark mode otherwise (no save or 'dark' saved)
            }

            // Initial positioning and sizing of the fade background on load
            const panelRect = middlePanel.getBoundingClientRect();
            const fadeExtra = 80; // Extra space for the blur effect
            panelFadeBackground.style.width = `${panelRect.width + fadeExtra}px`;
            panelFadeBackground.style.height = `${panelRect.height + fadeExtra}px`;
            panelFadeBackground.style.left = `${panelRect.left - fadeExtra / 2}px`;
            panelFadeBackground.style.top = `${panelRect.top - fadeExtra / 2}px`;
        });

        // Add event listener to the button
        themeToggleButton.addEventListener('click', () => {
            // Check if the body currently has the 'dark-mode' class
            const isDarkMode = body.classList.contains('dark-mode');
            setTheme(!isDarkMode); // Toggle the theme
        });
    </script>

</body>
</html>
